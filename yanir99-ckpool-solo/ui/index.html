<!DOCTYPE html>
<html>
<head>
  <title>CKPool Config</title>
  <script>
    async function loadConfig() {
      const res = await fetch('/conf/ckpool.conf');
      const text = await res.text();
      document.getElementById('conf').value = text;
    }

    async function saveConfig() {
      const content = document.getElementById('conf').value;
      await fetch('/conf/ckpool.conf', {
        method: 'PUT',
        headers: { 'Content-Type': 'text/plain' },
        body: content
      });
      alert('Saved!');
    }

    async function listLogs() {
      const ul = document.getElementById('log-list');
      const res = await fetch('/logs/');
      const html = await res.text();
      ul.innerHTML = html.match(/href="([^"]+\.log)"/g)
        .map(h => {
          const name = h.match(/"(.+\.log)"/)[1];
          return `<li><a href="/logs/${name}" target="_blank">${name}</a></li>`;
        }).join('');
    }

    window.onload = () => {
      loadConfig();
      listLogs();
    };
  </script>
</head>
<body>
  <h1>CKPool Config Editor</h1>
  <textarea id="config" rows="20" cols="80"></textarea><br>
  <button onclick="saveConfig()">Save Config</button>

  <h2>Logs</h2>
  <ul id="log-list"></ul>
</body>
</html>